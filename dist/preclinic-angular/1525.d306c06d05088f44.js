"use strict";(self.webpackChunkpreclinic_angular=self.webpackChunkpreclinic_angular||[]).push([[1525],{1525:(E,u,i)=>{i.r(u),i.d(u,{LoginModule:()=>c});var l=i(6895),d=i(27),s=i(433),f=i(6382),o=i(4650),p=i(866);function h(t,n){1&t&&(o.TgZ(0,"div"),o._uU(1," Email is required. "),o.qZA())}function L(t,n){1&t&&(o.TgZ(0,"div"),o._uU(1," Please, enter valid email address. "),o.qZA())}function g(t,n){if(1&t&&(o.TgZ(0,"div",25),o.YNc(1,h,2,0,"div",26),o.YNc(2,L,2,0,"div",26),o.qZA()),2&t){const e=o.oxw();o.xp6(1),o.Q6J("ngIf",e.f.email.errors&&e.f.email.errors.required),o.xp6(1),o.Q6J("ngIf",e.f.email.errors&&e.f.email.errors.email)}}function C(t,n){1&t&&(o.TgZ(0,"div"),o._uU(1," Password is required. "),o.qZA())}function r(t,n){if(1&t&&(o.TgZ(0,"div",25),o.YNc(1,C,2,0,"div",26),o.qZA()),2&t){const e=o.oxw();o.xp6(1),o.Q6J("ngIf",e.f.password.errors&&e.f.password.errors.required)}}function v(t,n){1&t&&(o.TgZ(0,"div",27)(1,"strong"),o._uU(2,"Error!"),o.qZA(),o._uU(3," EL usuario y contrase\xf1a son incorrectos. "),o.TgZ(4,"button",28),o._UZ(5,"span",29),o.qZA()())}const _=function(t){return{"is-invalid":t}};class a{get f(){return this.form.controls}constructor(n,e){this.auth=n,this.router=e,this.routes=f._,this.passwordClass=!1,this.ERROR=!1,this.form=new s.cw({email:new s.NI("josecode@gmail.com",[s.kI.required,s.kI.email]),password:new s.NI("12345678",[s.kI.required])})}ngOnInit(){localStorage.getItem("authenticated")&&this.router.navigate([f._.adminDashboard])}loginFormSubmit(){this.form.valid&&(this.ERROR=!1,this.auth.login(this.form.value.email?this.form.value.email:"",this.form.value.password?this.form.value.password:"").subscribe(n=>{console.log(n),n?setTimeout(()=>{document.location.reload()},50):this.ERROR=!0},n=>{console.log(n)}))}togglePassword(){this.passwordClass=!this.passwordClass}}a.\u0275fac=function(n){return new(n||a)(o.Y36(p.e),o.Y36(d.F0))},a.\u0275cmp=o.Xpm({type:a,selectors:[["app-login"]],decls:37,vars:14,consts:[[1,"main-wrapper","login-body"],[1,"container-fluid","px-0"],[1,"row"],[1,"col-lg-6","login-wrap"],[1,"login-sec"],[1,"log-img"],["src","assets/img/login-02.png","alt","Logo",1,"img-fluid"],[1,"col-lg-6","login-wrap-bg"],[1,"login-wrapper"],[1,"loginbox"],[1,"login-right"],[1,"login-right-wrap"],[1,"account-logo"],[3,"routerLink"],["src","assets/img/login-logo.png","alt",""],[3,"formGroup","ngSubmit"],[1,"form-group"],[1,"login-danger"],["formControlName","email","type","text",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["formControlName","password",1,"form-control","pass-input",3,"type","ngClass"],[1,"profile-views","toggle-password",3,"ngClass","click"],["class","alert alert-danger alert-dismissible fade show","role","alert",4,"ngIf"],[1,"form-group","login-btn"],["type","submit",1,"btn","btn-primary","btn-block",3,"disabled"],[1,"invalid-feedback"],[4,"ngIf"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"],["type","button","data-bs-dismiss","alert","aria-label","Close",1,"btn-close"],["aria-hidden","true"]],template:function(n,e){1&n&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),o._UZ(6,"img",6),o.qZA()()(),o.TgZ(7,"div",7)(8,"div",8)(9,"div",9)(10,"div",10)(11,"div",11)(12,"div",12)(13,"a",13),o._UZ(14,"img",14),o.qZA()(),o.TgZ(15,"h2"),o._uU(16,"Login"),o.qZA(),o.TgZ(17,"form",15),o.NdJ("ngSubmit",function(){return e.loginFormSubmit()}),o.TgZ(18,"div",16)(19,"label"),o._uU(20,"Email "),o.TgZ(21,"span",17),o._uU(22,"*"),o.qZA()(),o._UZ(23,"input",18),o.YNc(24,g,3,2,"div",19),o.qZA(),o.TgZ(25,"div",16)(26,"label"),o._uU(27,"Password "),o.TgZ(28,"span",17),o._uU(29,"*"),o.qZA()(),o._UZ(30,"input",20),o.YNc(31,r,2,1,"div",19),o.TgZ(32,"span",21),o.NdJ("click",function(){return e.togglePassword()}),o.qZA()(),o.YNc(33,v,6,0,"div",22),o.TgZ(34,"div",23)(35,"button",24),o._uU(36," Login "),o.qZA()()()()()()()()()()()),2&n&&(o.xp6(13),o.Q6J("routerLink",e.routes.adminDashboard),o.xp6(4),o.Q6J("formGroup",e.form),o.xp6(6),o.Q6J("ngClass",o.VKq(10,_,e.f.email.touched&&e.f.email.invalid)),o.xp6(1),o.Q6J("ngIf",e.f.email.touched&&e.f.email.invalid),o.xp6(6),o.Q6J("type",e.passwordClass?"text":"password")("ngClass",o.VKq(12,_,e.f.password.touched&&e.f.password.invalid)),o.xp6(1),o.Q6J("ngIf",e.f.password.touched&&e.f.password.invalid),o.xp6(1),o.Q6J("ngClass",e.passwordClass?"feather icon-eye":"feather icon-eye-off"),o.xp6(1),o.Q6J("ngIf",e.ERROR),o.xp6(2),o.Q6J("disabled",e.form.invalid))},dependencies:[l.mk,l.O5,d.rH,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u]});const I=[{path:"",component:a}];class m{}m.\u0275fac=function(n){return new(n||m)},m.\u0275mod=o.oAB({type:m}),m.\u0275inj=o.cJS({imports:[d.Bz.forChild(I),d.Bz]});var R=i(9079);class c{}c.\u0275fac=function(n){return new(n||c)},c.\u0275mod=o.oAB({type:c}),c.\u0275inj=o.cJS({imports:[l.ez,m,R.m]})},5862:(E,u,i)=>{i.d(u,{$g:()=>s});const s="http://api.admincursos-udemy.site/api"},866:(E,u,i)=>{i.d(u,{e:()=>g});var l=i(6382),d=i(5862),s=i(4004),f=i(262),o=i(9646),p=i(4650),h=i(27),L=i(529);class g{constructor(r,v){this.router=r,this.http=v,this.getLocalStorage()}getLocalStorage(){if(localStorage.getItem("token")&&localStorage.getItem("user")){let r=localStorage.getItem("user");this.user=JSON.parse(r||""),this.token=localStorage.getItem("token")}else this.user=null,this.token=null}login(r,v){return this.http.post(d.$g+"/auth/login",{email:r,password:v}).pipe((0,s.U)(a=>(console.log(a),this.saveLocalStorage(a))),(0,f.K)(a=>(console.log(a),(0,o.of)(void 0))))}saveLocalStorage(r){return!(!r||!r.access_token||(localStorage.setItem("token",r.access_token),localStorage.setItem("user",JSON.stringify(r.user)),localStorage.setItem("authenticated","true"),0))}logout(){localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("authenticated"),this.router.navigate([l._.login])}}g.\u0275fac=function(r){return new(r||g)(p.LFG(h.F0),p.LFG(L.eN))},g.\u0275prov=p.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"})}}]);